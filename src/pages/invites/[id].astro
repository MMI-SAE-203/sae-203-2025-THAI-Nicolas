---
import Layout from "../../layouts/Layout.astro";
import CardEvenements from "../../components/CardEvenements.astro";
import { getInviteById } from "../../../backend/backend.mjs";

const { id } = Astro.params;
const invite = await getInviteById(id);

if (!invite) {
  return Astro.redirect("/invites");
}
---

<Layout>
  <section>
    <header>
      <h1>{invite.prenom} {invite.nom}</h1>
    </header>
    <div>
      <div class="flex flex-col justify-center items-center">
        <img src={invite.img} alt="" />
        <p>{invite.metier}</p>
      </div>
      <div>
        <h2>Biographie</h2>
        <div
          class="flex-col justify-center items-center text-lg mx-8 [&>p]:pb-6"
          set:html={invite.biographie}
        />
      </div>
    </div>
  </section>

  <section>
    <header>
      <h2>Ses Apparitions</h2>
    </header>
    <div
      class="flex-col justify-center items-center text-lg mx-8 [&>p]:pb-6"
      set:html={invite.films}
    />
  </section>

  <section>
    <header>
      <h2>Événements Associés</h2>
    </header>
    <CardEvenements {...invite.evenements} />
  </section>
</Layout>
